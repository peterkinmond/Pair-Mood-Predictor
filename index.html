<!doctype html>

<!--[if lt IE 7]>
<html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7]>
<html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8]>
<html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">

    <title>Backbone Tunes</title>
    <meta name="author" content="David Goodlad <david@goodlad.ca>">

    <link rel="stylesheet" href="style/screen.css" media="screen, projection">
    <link rel="stylesheet" href="style/fancypants.css" media="screen, projection">

    <script src="js/vendor/modernizr-1.6.min.js"></script>
    <script src="js/vendor/jquery-1.5.1.min.js"></script>
    <script src="js/vendor/underscore.js"></script>
    <script src="js/vendor/backbone.js"></script>
    <script src="js/vendor/d3.js"></script>
    <script src="js/vendor/d3.layout.js"></script>
    <script src="js/Tunes.js"></script>

    <script type="application/javascript">
        var mood_number = 10;   // Perfect mood is 10

        function alterMood(checkbox, amount) {
            if (checkbox.checked) {
                mood_number += amount;
            }
            else {
                mood_number -= amount;
            }
            $('#mood_number').text(mood_number);

            var offset = mood_number;
            if(mood_number > 10) {
                offset = 10;
            }
            else if(mood_number <= 1) {
                offset = 1.5;
            }
            rotateChart(offset * 36);
        }
    </script>
</head>

<body>
<div id="title">
    <h1>Pair Mood Predictor</h1>
</div>

<div id="container">
    <h2>Temp In Office</h1>
    <input type="radio" name="office_temp" value="-2"/>Freezing<br/>
    <input type="radio" name="office_temp" value="0"/>Room temperature<br/>
    <input type="radio" name="office_temp" value="-2"/>Boiling<br/>

    <h2>Time Of Day</h1>
    <input type="radio" name="time_of_day" value="-1"/> 9AM - Noon<br/>
    <input type="radio" name="time_of_day" value="0"/> Noon - 3pm<br/>
    <input type="radio" name="time_of_day" value="-3"/> 3pm - 6pm<br/>

    <h2>Number Of Dogs In Office</h1>
    <input type="radio" name="number_of_dogs" value="0"/>0<br/>
    <input type="radio" name="number_of_dogs" value="0"/>1<br/>
    <input type="radio" name="number_of_dogs" value="-3"/>2 or more (enough to run around engineering)<br/>

    <h2>Other Factors</h1>
    <input type="checkbox" name="vehicle" value="Bike" onclick="alterMood(this, -2)">Saw a new JS global variable</input><br/>
    <input type="checkbox" name="vehicle" value="Bike" onclick="alterMood(this, -4)">Had an argument about naming</input><br/>
    <input type="checkbox" name="vehicle" value="Bike" onclick="alterMood(this, 5)">Had Gaylord's for lunch</input><br/>

    <div id="mood" class="library">
        Mood:
        <div id="mood_number">10</div>
    </div>
</div>

<div id="chart" class="chart">
    <div id='arrowed'>
        <img src="images/arrow.png" />
    </div>

    <div id="charted">

    </div>
</div>

    <script type="text/javascript">
var rotateChart = function(rotateAngle) {
    $('body #charted').html("");
    drawChart(rotateAngle);
};


function drawChart(rotateAngle) {
    var w = 400,
        h = 400,
        r = Math.min(w, h) / 2,
        initialAngle = -125,
        rotation = initialAngle + rotateAngle;
        text = ['elated', 'happy', 'so-so', 'angry', 'nuclear'],
        data = d3.range(text.length).map(function() { return 1/text.length; }),
        colours = ['#2ca02c', '#98df8a', "#ff7f0e", '#ff9896',"#d62728"],
        colour = d3.scale.ordinal().range(colours),
        donut = d3.layout.pie(),
        arc = d3.svg.arc().innerRadius(r * .5).outerRadius(r);

    var vis = d3.select("body #charted")
      .append("svg")
        .data([data])
        .attr("width", w)
        .attr("height", h);

    var arcs = vis.selectAll("g.arc")
        .data(donut)
      .enter().append("g")
        .attr("class", "arc")
        .attr("transform", "translate(" + r + "," + r + ")rotate(" + rotation + ")");

    arcs.append("path")
        .attr("fill", function(d, i) { return colour(i); })
        .attr("d", arc);

    arcs.append("text")
        .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")rotate(" + (-1 * rotation) + ")"; })
        .attr("dy", ".35em")
        .attr("text-anchor", "middle")
        .attr("display", function(d) { return null; })
        .attr("class", "pie-piece")
        .text(function(d, i) { return text[i]; });
}
    </script>
</body>
</html>
